<!DOCTYPE html>
<!-- saved from url=(0014)about:internet -->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta http-equiv="x-ua-compatible" content="IE=9" >

<title>Tidying the UCI HAR data set</title>

<style type="text/css">
body, td {
   font-family: sans-serif;
   background-color: white;
   font-size: 12px;
   margin: 8px;
}

tt, code, pre {
   font-family: 'DejaVu Sans Mono', 'Droid Sans Mono', 'Lucida Console', Consolas, Monaco, monospace;
}

h1 { 
   font-size:2.2em; 
}

h2 { 
   font-size:1.8em; 
}

h3 { 
   font-size:1.4em; 
}

h4 { 
   font-size:1.0em; 
}

h5 { 
   font-size:0.9em; 
}

h6 { 
   font-size:0.8em; 
}

a:visited {
   color: rgb(50%, 0%, 50%);
}

pre {	
   margin-top: 0;
   max-width: 95%;
   border: 1px solid #ccc;
   white-space: pre-wrap;
}

pre code {
   display: block; padding: 0.5em;
}

code.r, code.cpp {
   background-color: #F8F8F8;
}

table, td, th {
  border: none;
}

blockquote {
   color:#666666;
   margin:0;
   padding-left: 1em;
   border-left: 0.5em #EEE solid;
}

hr {
   height: 0px;
   border-bottom: none;
   border-top-width: thin;
   border-top-style: dotted;
   border-top-color: #999999;
}

@media print {
   * { 
      background: transparent !important; 
      color: black !important; 
      filter:none !important; 
      -ms-filter: none !important; 
   }

   body { 
      font-size:12pt; 
      max-width:100%; 
   }
       
   a, a:visited { 
      text-decoration: underline; 
   }

   hr { 
      visibility: hidden;
      page-break-before: always;
   }

   pre, blockquote { 
      padding-right: 1em; 
      page-break-inside: avoid; 
   }

   tr, img { 
      page-break-inside: avoid; 
   }

   img { 
      max-width: 100% !important; 
   }

   @page :left { 
      margin: 15mm 20mm 15mm 10mm; 
   }
     
   @page :right { 
      margin: 15mm 10mm 15mm 20mm; 
   }

   p, h2, h3 { 
      orphans: 3; widows: 3; 
   }

   h2, h3 { 
      page-break-after: avoid; 
   }
}

</style>

<!-- Styles for R syntax highlighter -->
<style type="text/css">
   pre .operator,
   pre .paren {
     color: rgb(104, 118, 135)
   }

   pre .literal {
     color: rgb(88, 72, 246)
   }

   pre .number {
     color: rgb(0, 0, 205);
   }

   pre .comment {
     color: rgb(76, 136, 107);
   }

   pre .keyword {
     color: rgb(0, 0, 255);
   }

   pre .identifier {
     color: rgb(0, 0, 0);
   }

   pre .string {
     color: rgb(3, 106, 7);
   }
</style>

<!-- R syntax highlighter -->
<script type="text/javascript">
var hljs=new function(){function m(p){return p.replace(/&/gm,"&amp;").replace(/</gm,"&lt;")}function f(r,q,p){return RegExp(q,"m"+(r.cI?"i":"")+(p?"g":""))}function b(r){for(var p=0;p<r.childNodes.length;p++){var q=r.childNodes[p];if(q.nodeName=="CODE"){return q}if(!(q.nodeType==3&&q.nodeValue.match(/\s+/))){break}}}function h(t,s){var p="";for(var r=0;r<t.childNodes.length;r++){if(t.childNodes[r].nodeType==3){var q=t.childNodes[r].nodeValue;if(s){q=q.replace(/\n/g,"")}p+=q}else{if(t.childNodes[r].nodeName=="BR"){p+="\n"}else{p+=h(t.childNodes[r])}}}if(/MSIE [678]/.test(navigator.userAgent)){p=p.replace(/\r/g,"\n")}return p}function a(s){var r=s.className.split(/\s+/);r=r.concat(s.parentNode.className.split(/\s+/));for(var q=0;q<r.length;q++){var p=r[q].replace(/^language-/,"");if(e[p]){return p}}}function c(q){var p=[];(function(s,t){for(var r=0;r<s.childNodes.length;r++){if(s.childNodes[r].nodeType==3){t+=s.childNodes[r].nodeValue.length}else{if(s.childNodes[r].nodeName=="BR"){t+=1}else{if(s.childNodes[r].nodeType==1){p.push({event:"start",offset:t,node:s.childNodes[r]});t=arguments.callee(s.childNodes[r],t);p.push({event:"stop",offset:t,node:s.childNodes[r]})}}}}return t})(q,0);return p}function k(y,w,x){var q=0;var z="";var s=[];function u(){if(y.length&&w.length){if(y[0].offset!=w[0].offset){return(y[0].offset<w[0].offset)?y:w}else{return w[0].event=="start"?y:w}}else{return y.length?y:w}}function t(D){var A="<"+D.nodeName.toLowerCase();for(var B=0;B<D.attributes.length;B++){var C=D.attributes[B];A+=" "+C.nodeName.toLowerCase();if(C.value!==undefined&&C.value!==false&&C.value!==null){A+='="'+m(C.value)+'"'}}return A+">"}while(y.length||w.length){var v=u().splice(0,1)[0];z+=m(x.substr(q,v.offset-q));q=v.offset;if(v.event=="start"){z+=t(v.node);s.push(v.node)}else{if(v.event=="stop"){var p,r=s.length;do{r--;p=s[r];z+=("</"+p.nodeName.toLowerCase()+">")}while(p!=v.node);s.splice(r,1);while(r<s.length){z+=t(s[r]);r++}}}}return z+m(x.substr(q))}function j(){function q(x,y,v){if(x.compiled){return}var u;var s=[];if(x.k){x.lR=f(y,x.l||hljs.IR,true);for(var w in x.k){if(!x.k.hasOwnProperty(w)){continue}if(x.k[w] instanceof Object){u=x.k[w]}else{u=x.k;w="keyword"}for(var r in u){if(!u.hasOwnProperty(r)){continue}x.k[r]=[w,u[r]];s.push(r)}}}if(!v){if(x.bWK){x.b="\\b("+s.join("|")+")\\s"}x.bR=f(y,x.b?x.b:"\\B|\\b");if(!x.e&&!x.eW){x.e="\\B|\\b"}if(x.e){x.eR=f(y,x.e)}}if(x.i){x.iR=f(y,x.i)}if(x.r===undefined){x.r=1}if(!x.c){x.c=[]}x.compiled=true;for(var t=0;t<x.c.length;t++){if(x.c[t]=="self"){x.c[t]=x}q(x.c[t],y,false)}if(x.starts){q(x.starts,y,false)}}for(var p in e){if(!e.hasOwnProperty(p)){continue}q(e[p].dM,e[p],true)}}function d(B,C){if(!j.called){j();j.called=true}function q(r,M){for(var L=0;L<M.c.length;L++){if((M.c[L].bR.exec(r)||[null])[0]==r){return M.c[L]}}}function v(L,r){if(D[L].e&&D[L].eR.test(r)){return 1}if(D[L].eW){var M=v(L-1,r);return M?M+1:0}return 0}function w(r,L){return L.i&&L.iR.test(r)}function K(N,O){var M=[];for(var L=0;L<N.c.length;L++){M.push(N.c[L].b)}var r=D.length-1;do{if(D[r].e){M.push(D[r].e)}r--}while(D[r+1].eW);if(N.i){M.push(N.i)}return f(O,M.join("|"),true)}function p(M,L){var N=D[D.length-1];if(!N.t){N.t=K(N,E)}N.t.lastIndex=L;var r=N.t.exec(M);return r?[M.substr(L,r.index-L),r[0],false]:[M.substr(L),"",true]}function z(N,r){var L=E.cI?r[0].toLowerCase():r[0];var M=N.k[L];if(M&&M instanceof Array){return M}return false}function F(L,P){L=m(L);if(!P.k){return L}var r="";var O=0;P.lR.lastIndex=0;var M=P.lR.exec(L);while(M){r+=L.substr(O,M.index-O);var N=z(P,M);if(N){x+=N[1];r+='<span class="'+N[0]+'">'+M[0]+"</span>"}else{r+=M[0]}O=P.lR.lastIndex;M=P.lR.exec(L)}return r+L.substr(O,L.length-O)}function J(L,M){if(M.sL&&e[M.sL]){var r=d(M.sL,L);x+=r.keyword_count;return r.value}else{return F(L,M)}}function I(M,r){var L=M.cN?'<span class="'+M.cN+'">':"";if(M.rB){y+=L;M.buffer=""}else{if(M.eB){y+=m(r)+L;M.buffer=""}else{y+=L;M.buffer=r}}D.push(M);A+=M.r}function G(N,M,Q){var R=D[D.length-1];if(Q){y+=J(R.buffer+N,R);return false}var P=q(M,R);if(P){y+=J(R.buffer+N,R);I(P,M);return P.rB}var L=v(D.length-1,M);if(L){var O=R.cN?"</span>":"";if(R.rE){y+=J(R.buffer+N,R)+O}else{if(R.eE){y+=J(R.buffer+N,R)+O+m(M)}else{y+=J(R.buffer+N+M,R)+O}}while(L>1){O=D[D.length-2].cN?"</span>":"";y+=O;L--;D.length--}var r=D[D.length-1];D.length--;D[D.length-1].buffer="";if(r.starts){I(r.starts,"")}return R.rE}if(w(M,R)){throw"Illegal"}}var E=e[B];var D=[E.dM];var A=0;var x=0;var y="";try{var s,u=0;E.dM.buffer="";do{s=p(C,u);var t=G(s[0],s[1],s[2]);u+=s[0].length;if(!t){u+=s[1].length}}while(!s[2]);if(D.length>1){throw"Illegal"}return{r:A,keyword_count:x,value:y}}catch(H){if(H=="Illegal"){return{r:0,keyword_count:0,value:m(C)}}else{throw H}}}function g(t){var p={keyword_count:0,r:0,value:m(t)};var r=p;for(var q in e){if(!e.hasOwnProperty(q)){continue}var s=d(q,t);s.language=q;if(s.keyword_count+s.r>r.keyword_count+r.r){r=s}if(s.keyword_count+s.r>p.keyword_count+p.r){r=p;p=s}}if(r.language){p.second_best=r}return p}function i(r,q,p){if(q){r=r.replace(/^((<[^>]+>|\t)+)/gm,function(t,w,v,u){return w.replace(/\t/g,q)})}if(p){r=r.replace(/\n/g,"<br>")}return r}function n(t,w,r){var x=h(t,r);var v=a(t);var y,s;if(v){y=d(v,x)}else{return}var q=c(t);if(q.length){s=document.createElement("pre");s.innerHTML=y.value;y.value=k(q,c(s),x)}y.value=i(y.value,w,r);var u=t.className;if(!u.match("(\\s|^)(language-)?"+v+"(\\s|$)")){u=u?(u+" "+v):v}if(/MSIE [678]/.test(navigator.userAgent)&&t.tagName=="CODE"&&t.parentNode.tagName=="PRE"){s=t.parentNode;var p=document.createElement("div");p.innerHTML="<pre><code>"+y.value+"</code></pre>";t=p.firstChild.firstChild;p.firstChild.cN=s.cN;s.parentNode.replaceChild(p.firstChild,s)}else{t.innerHTML=y.value}t.className=u;t.result={language:v,kw:y.keyword_count,re:y.r};if(y.second_best){t.second_best={language:y.second_best.language,kw:y.second_best.keyword_count,re:y.second_best.r}}}function o(){if(o.called){return}o.called=true;var r=document.getElementsByTagName("pre");for(var p=0;p<r.length;p++){var q=b(r[p]);if(q){n(q,hljs.tabReplace)}}}function l(){if(window.addEventListener){window.addEventListener("DOMContentLoaded",o,false);window.addEventListener("load",o,false)}else{if(window.attachEvent){window.attachEvent("onload",o)}else{window.onload=o}}}var e={};this.LANGUAGES=e;this.highlight=d;this.highlightAuto=g;this.fixMarkup=i;this.highlightBlock=n;this.initHighlighting=o;this.initHighlightingOnLoad=l;this.IR="[a-zA-Z][a-zA-Z0-9_]*";this.UIR="[a-zA-Z_][a-zA-Z0-9_]*";this.NR="\\b\\d+(\\.\\d+)?";this.CNR="\\b(0[xX][a-fA-F0-9]+|(\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)";this.BNR="\\b(0b[01]+)";this.RSR="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|\\.|-|-=|/|/=|:|;|<|<<|<<=|<=|=|==|===|>|>=|>>|>>=|>>>|>>>=|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~";this.ER="(?![\\s\\S])";this.BE={b:"\\\\.",r:0};this.ASM={cN:"string",b:"'",e:"'",i:"\\n",c:[this.BE],r:0};this.QSM={cN:"string",b:'"',e:'"',i:"\\n",c:[this.BE],r:0};this.CLCM={cN:"comment",b:"//",e:"$"};this.CBLCLM={cN:"comment",b:"/\\*",e:"\\*/"};this.HCM={cN:"comment",b:"#",e:"$"};this.NM={cN:"number",b:this.NR,r:0};this.CNM={cN:"number",b:this.CNR,r:0};this.BNM={cN:"number",b:this.BNR,r:0};this.inherit=function(r,s){var p={};for(var q in r){p[q]=r[q]}if(s){for(var q in s){p[q]=s[q]}}return p}}();hljs.LANGUAGES.cpp=function(){var a={keyword:{"false":1,"int":1,"float":1,"while":1,"private":1,"char":1,"catch":1,"export":1,virtual:1,operator:2,sizeof:2,dynamic_cast:2,typedef:2,const_cast:2,"const":1,struct:1,"for":1,static_cast:2,union:1,namespace:1,unsigned:1,"long":1,"throw":1,"volatile":2,"static":1,"protected":1,bool:1,template:1,mutable:1,"if":1,"public":1,friend:2,"do":1,"return":1,"goto":1,auto:1,"void":2,"enum":1,"else":1,"break":1,"new":1,extern:1,using:1,"true":1,"class":1,asm:1,"case":1,typeid:1,"short":1,reinterpret_cast:2,"default":1,"double":1,register:1,explicit:1,signed:1,typename:1,"try":1,"this":1,"switch":1,"continue":1,wchar_t:1,inline:1,"delete":1,alignof:1,char16_t:1,char32_t:1,constexpr:1,decltype:1,noexcept:1,nullptr:1,static_assert:1,thread_local:1,restrict:1,_Bool:1,complex:1},built_in:{std:1,string:1,cin:1,cout:1,cerr:1,clog:1,stringstream:1,istringstream:1,ostringstream:1,auto_ptr:1,deque:1,list:1,queue:1,stack:1,vector:1,map:1,set:1,bitset:1,multiset:1,multimap:1,unordered_set:1,unordered_map:1,unordered_multiset:1,unordered_multimap:1,array:1,shared_ptr:1}};return{dM:{k:a,i:"</",c:[hljs.CLCM,hljs.CBLCLM,hljs.QSM,{cN:"string",b:"'\\\\?.",e:"'",i:"."},{cN:"number",b:"\\b(\\d+(\\.\\d*)?|\\.\\d+)(u|U|l|L|ul|UL|f|F)"},hljs.CNM,{cN:"preprocessor",b:"#",e:"$"},{cN:"stl_container",b:"\\b(deque|list|queue|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array)\\s*<",e:">",k:a,r:10,c:["self"]}]}}}();hljs.LANGUAGES.r={dM:{c:[hljs.HCM,{cN:"number",b:"\\b0[xX][0-9a-fA-F]+[Li]?\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\b\\d+(?:[eE][+\\-]?\\d*)?L\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\b\\d+\\.(?!\\d)(?:i\\b)?",e:hljs.IMMEDIATE_RE,r:1},{cN:"number",b:"\\b\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d*)?i?\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\.\\d+(?:[eE][+\\-]?\\d*)?i?\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"keyword",b:"(?:tryCatch|library|setGeneric|setGroupGeneric)\\b",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\.\\.\\.",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\.\\.\\d+(?![\\w.])",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\b(?:function)",e:hljs.IMMEDIATE_RE,r:2},{cN:"keyword",b:"(?:if|in|break|next|repeat|else|for|return|switch|while|try|stop|warning|require|attach|detach|source|setMethod|setClass)\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"literal",b:"(?:NA|NA_integer_|NA_real_|NA_character_|NA_complex_)\\b",e:hljs.IMMEDIATE_RE,r:10},{cN:"literal",b:"(?:NULL|TRUE|FALSE|T|F|Inf|NaN)\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"identifier",b:"[a-zA-Z.][a-zA-Z0-9._]*\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"operator",b:"<\\-(?!\\s*\\d)",e:hljs.IMMEDIATE_RE,r:2},{cN:"operator",b:"\\->|<\\-",e:hljs.IMMEDIATE_RE,r:1},{cN:"operator",b:"%%|~",e:hljs.IMMEDIATE_RE},{cN:"operator",b:">=|<=|==|!=|\\|\\||&&|=|\\+|\\-|\\*|/|\\^|>|<|!|&|\\||\\$|:",e:hljs.IMMEDIATE_RE,r:0},{cN:"operator",b:"%",e:"%",i:"\\n",r:1},{cN:"identifier",b:"`",e:"`",r:0},{cN:"string",b:'"',e:'"',c:[hljs.BE],r:0},{cN:"string",b:"'",e:"'",c:[hljs.BE],r:0},{cN:"paren",b:"[[({\\])}]",e:hljs.IMMEDIATE_RE,r:0}]}};
hljs.initHighlightingOnLoad();
</script>


<!-- MathJax scripts -->
<script type="text/javascript" src="https://c328740.ssl.cf1.rackcdn.com/mathjax/2.0-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>



</head>

<body>
<h1>Tidying the UCI HAR data set</h1>

<p>This script uses data from the UCI Machine Learning Repository :</p>

<p><strong>Human Activity Recognition Using Smartphones Data Set</strong></p>

<p><a href="http://archive.ics.uci.edu/ml/datasets/Human+Activity+Recognition+Using+Smartphones">http://archive.ics.uci.edu/ml/datasets/Human+Activity+Recognition+Using+Smartphones</a></p>

<p><em>Associated research</em></p>

<p>Davide Anguita, Alessandro Ghio, Luca Oneto, Xavier Parra and Jorge L. Reyes-Ortiz. 
&ldquo;Human Activity Recognition on Smartphones using a Multiclass Hardware-Friendly Support Vector Machine.&rdquo; International Workshop of Ambient Assisted Living (IWAAL 2012). 
Vitoria-Gasteiz, Spain. Dec 2012</p>

<h3>Preamble</h3>

<p><em>Last minute addendum (Tuesday April 29th)</em></p>

<ul>
<li>I was so stuck on the 5 key instructions of the project ssignment that I didn&#39;t remember we should submit a code book, which is actually partially shown in this README but not as clearly as it should. So you will find a file CodeBook.md at the root of this repository.</li>
<li>I also realized the instructions confused me in thinking the expected tidy dataset should be comprised of one single table. This is just plain stupid of me, a tidy dataset is actually made of several data frames that you can join if needed, with each reference data frame containing single observational units. In our case the subject is our observational unit so I finally split the initial single dataframe I submitted into several dataframes (one per activity, see at end of this README).</li>
</ul>

<p><em>End of last minute edit</em></p>

<p>This README was written with the knitr pacakge. In RStudio you should actually be able to open tidy.Rmd and run the &ldquo;Knit HTML&rdquo; command in the script editor toolbar. It will execute all the R code chunks contained in the Rmd file.</p>

<p>If you ever want to adopt &ldquo;Rmd-first&rdquo; coding practices you can still extract the R code from the Rmd file like this :</p>

<pre><code>library(knitr)
purl(&quot;tidy.Rmd&quot;, output = &quot;run_analysis.R&quot;, documentation = 2)
</code></pre>

<h3>Step 1 : data merge</h3>

<p>The UCI dataset is broken down in several files : predictor features, predicted activities, subject IDs. Each of this 3 sets is further broken down into training (70% of entire dataset) and test set (remaining 30%). </p>

<p>Let&#39;s start by loading feature labels from provided file :</p>

<pre><code class="r">features &lt;- read.table(&quot;features.txt&quot;, header = FALSE, stringsAsFactors = FALSE)
names(features) &lt;- c(&quot;id&quot;, &quot;name&quot;)
</code></pre>

<p>Then let&#39;s load test data sets :</p>

<pre><code class="r">xtest &lt;- read.table(&quot;test/X_test.txt&quot;)
names(xtest) &lt;- features$name
ytest &lt;- read.table(&quot;test/y_test.txt&quot;)
names(ytest) &lt;- c(&quot;activity_id&quot;)
stest &lt;- read.table(&quot;test/subject_test.txt&quot;)
names(stest) &lt;- c(&quot;subject_id&quot;)
</code></pre>

<p>Merge test sets side by side :</p>

<pre><code class="r">test &lt;- cbind(stest, xtest, ytest)
</code></pre>

<p>Let&#39;s check dimensions and characteristics of our test data :</p>

<pre><code class="r">str(test)
</code></pre>

<pre><code>## &#39;data.frame&#39;:    2947 obs. of  563 variables:
##  $ subject_id                          : int  2 2 2 2 2 2 2 2 2 2 ...
##  $ tBodyAcc-mean()-X                   : num  0.257 0.286 0.275 0.27 0.275 ...
##  $ tBodyAcc-mean()-Y                   : num  -0.0233 -0.0132 -0.0261 -0.0326 -0.0278 ...
##  $ tBodyAcc-mean()-Z                   : num  -0.0147 -0.1191 -0.1182 -0.1175 -0.1295 ...
##  $ tBodyAcc-std()-X                    : num  -0.938 -0.975 -0.994 -0.995 -0.994 ...
##  $ tBodyAcc-std()-Y                    : num  -0.92 -0.967 -0.97 -0.973 -0.967 ...
##  $ tBodyAcc-std()-Z                    : num  -0.668 -0.945 -0.963 -0.967 -0.978 ...
##  $ tBodyAcc-mad()-X                    : num  -0.953 -0.987 -0.994 -0.995 -0.994 ...
##  $ tBodyAcc-mad()-Y                    : num  -0.925 -0.968 -0.971 -0.974 -0.966 ...
##  $ tBodyAcc-mad()-Z                    : num  -0.674 -0.946 -0.963 -0.969 -0.977 ...
##  $ tBodyAcc-max()-X                    : num  -0.894 -0.894 -0.939 -0.939 -0.939 ...
##  $ tBodyAcc-max()-Y                    : num  -0.555 -0.555 -0.569 -0.569 -0.561 ...
##  $ tBodyAcc-max()-Z                    : num  -0.466 -0.806 -0.799 -0.799 -0.826 ...
##  $ tBodyAcc-min()-X                    : num  0.717 0.768 0.848 0.848 0.849 ...
##  $ tBodyAcc-min()-Y                    : num  0.636 0.684 0.668 0.668 0.671 ...
##  $ tBodyAcc-min()-Z                    : num  0.789 0.797 0.822 0.822 0.83 ...
##  $ tBodyAcc-sma()                      : num  -0.878 -0.969 -0.977 -0.974 -0.975 ...
##  $ tBodyAcc-energy()-X                 : num  -0.998 -1 -1 -1 -1 ...
##  $ tBodyAcc-energy()-Y                 : num  -0.998 -1 -1 -0.999 -0.999 ...
##  $ tBodyAcc-energy()-Z                 : num  -0.934 -0.998 -0.999 -0.999 -0.999 ...
##  $ tBodyAcc-iqr()-X                    : num  -0.976 -0.994 -0.993 -0.995 -0.993 ...
##  $ tBodyAcc-iqr()-Y                    : num  -0.95 -0.974 -0.974 -0.979 -0.967 ...
##  $ tBodyAcc-iqr()-Z                    : num  -0.83 -0.951 -0.965 -0.97 -0.976 ...
##  $ tBodyAcc-entropy()-X                : num  -0.168 -0.302 -0.618 -0.75 -0.591 ...
##  $ tBodyAcc-entropy()-Y                : num  -0.379 -0.348 -0.695 -0.899 -0.74 ...
##  $ tBodyAcc-entropy()-Z                : num  0.246 -0.405 -0.537 -0.554 -0.799 ...
##  $ tBodyAcc-arCoeff()-X,1              : num  0.521 0.507 0.242 0.175 0.116 ...
##  $ tBodyAcc-arCoeff()-X,2              : num  -0.4878 -0.1565 -0.115 -0.0513 -0.0289 ...
##  $ tBodyAcc-arCoeff()-X,3              : num  0.4823 0.0407 0.0327 0.0342 -0.0328 ...
##  $ tBodyAcc-arCoeff()-X,4              : num  -0.0455 0.273 0.1924 0.1536 0.2943 ...
##  $ tBodyAcc-arCoeff()-Y,1              : num  0.21196 0.19757 -0.01194 0.03077 0.00063 ...
##  $ tBodyAcc-arCoeff()-Y,2              : num  -0.1349 -0.1946 -0.0634 -0.1293 -0.0453 ...
##  $ tBodyAcc-arCoeff()-Y,3              : num  0.131 0.411 0.471 0.446 0.168 ...
##  $ tBodyAcc-arCoeff()-Y,4              : num  -0.0142 -0.3405 -0.5074 -0.4195 -0.0682 ...
##  $ tBodyAcc-arCoeff()-Z,1              : num  -0.106 0.0776 0.1885 0.2715 0.0744 ...
##  $ tBodyAcc-arCoeff()-Z,2              : num  0.0735 -0.084 -0.2316 -0.2258 0.0271 ...
##  $ tBodyAcc-arCoeff()-Z,3              : num  -0.1715 0.0353 0.6321 0.4164 -0.1459 ...
##  $ tBodyAcc-arCoeff()-Z,4              : num  0.0401 -0.0101 -0.5507 -0.2864 -0.0502 ...
##  $ tBodyAcc-correlation()-X,Y          : num  0.077 -0.105 0.3057 -0.0638 0.2352 ...
##  $ tBodyAcc-correlation()-X,Z          : num  -0.491 -0.429 -0.324 -0.167 0.29 ...
##  $ tBodyAcc-correlation()-Y,Z          : num  -0.709 0.399 0.28 0.545 0.458 ...
##  $ tGravityAcc-mean()-X                : num  0.936 0.927 0.93 0.929 0.927 ...
##  $ tGravityAcc-mean()-Y                : num  -0.283 -0.289 -0.288 -0.293 -0.303 ...
##  $ tGravityAcc-mean()-Z                : num  0.115 0.153 0.146 0.143 0.138 ...
##  $ tGravityAcc-std()-X                 : num  -0.925 -0.989 -0.996 -0.993 -0.996 ...
##  $ tGravityAcc-std()-Y                 : num  -0.937 -0.984 -0.988 -0.97 -0.971 ...
##  $ tGravityAcc-std()-Z                 : num  -0.564 -0.965 -0.982 -0.992 -0.968 ...
##  $ tGravityAcc-mad()-X                 : num  -0.93 -0.989 -0.996 -0.993 -0.996 ...
##  $ tGravityAcc-mad()-Y                 : num  -0.938 -0.983 -0.989 -0.971 -0.971 ...
##  $ tGravityAcc-mad()-Z                 : num  -0.606 -0.965 -0.98 -0.993 -0.969 ...
##  $ tGravityAcc-max()-X                 : num  0.906 0.856 0.856 0.856 0.854 ...
##  $ tGravityAcc-max()-Y                 : num  -0.279 -0.305 -0.305 -0.305 -0.313 ...
##  $ tGravityAcc-max()-Z                 : num  0.153 0.153 0.139 0.136 0.134 ...
##  $ tGravityAcc-min()-X                 : num  0.944 0.944 0.949 0.947 0.946 ...
##  $ tGravityAcc-min()-Y                 : num  -0.262 -0.262 -0.262 -0.273 -0.279 ...
##  $ tGravityAcc-min()-Z                 : num  -0.0762 0.149 0.145 0.1421 0.1309 ...
##  $ tGravityAcc-sma()                   : num  -0.0178 0.0577 0.0406 0.0461 0.0554 ...
##  $ tGravityAcc-energy()-X              : num  0.829 0.806 0.812 0.809 0.804 ...
##  $ tGravityAcc-energy()-Y              : num  -0.865 -0.858 -0.86 -0.854 -0.843 ...
##  $ tGravityAcc-energy()-Z              : num  -0.968 -0.957 -0.961 -0.963 -0.965 ...
##  $ tGravityAcc-iqr()-X                 : num  -0.95 -0.988 -0.996 -0.992 -0.996 ...
##  $ tGravityAcc-iqr()-Y                 : num  -0.946 -0.982 -0.99 -0.973 -0.972 ...
##  $ tGravityAcc-iqr()-Z                 : num  -0.76 -0.971 -0.979 -0.996 -0.969 ...
##  $ tGravityAcc-entropy()-X             : num  -0.425 -0.729 -0.823 -0.823 -0.83 ...
##  $ tGravityAcc-entropy()-Y             : num  -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 ...
##  $ tGravityAcc-entropy()-Z             : num  0.219 -0.465 -0.53 -0.7 -0.302 ...
##  $ tGravityAcc-arCoeff()-X,1           : num  -0.43 -0.51 -0.295 -0.343 -0.482 ...
##  $ tGravityAcc-arCoeff()-X,2           : num  0.431 0.525 0.305 0.359 0.539 ...
##  $ tGravityAcc-arCoeff()-X,3           : num  -0.432 -0.54 -0.315 -0.375 -0.596 ...
##  $ tGravityAcc-arCoeff()-X,4           : num  0.433 0.554 0.326 0.392 0.655 ...
##  $ tGravityAcc-arCoeff()-Y,1           : num  -0.795 -0.746 -0.232 -0.233 -0.493 ...
##  $ tGravityAcc-arCoeff()-Y,2           : num  0.781 0.733 0.169 0.176 0.463 ...
##  $ tGravityAcc-arCoeff()-Y,3           : num  -0.78 -0.737 -0.155 -0.169 -0.465 ...
##  $ tGravityAcc-arCoeff()-Y,4           : num  0.785 0.749 0.164 0.185 0.483 ...
##  $ tGravityAcc-arCoeff()-Z,1           : num  -0.984 -0.845 -0.429 -0.297 -0.536 ...
##  $ tGravityAcc-arCoeff()-Z,2           : num  0.987 0.869 0.44 0.304 0.544 ...
##  $ tGravityAcc-arCoeff()-Z,3           : num  -0.989 -0.893 -0.451 -0.311 -0.553 ...
##  $ tGravityAcc-arCoeff()-Z,4           : num  0.988 0.913 0.458 0.315 0.559 ...
##  $ tGravityAcc-correlation()-X,Y       : num  0.981 0.945 0.548 0.986 0.998 ...
##  $ tGravityAcc-correlation()-X,Z       : num  -0.996 -0.911 -0.335 0.653 0.916 ...
##  $ tGravityAcc-correlation()-Y,Z       : num  -0.96 -0.739 0.59 0.747 0.929 ...
##  $ tBodyAccJerk-mean()-X               : num  0.072 0.0702 0.0694 0.0749 0.0784 ...
##  $ tBodyAccJerk-mean()-Y               : num  0.04575 -0.01788 -0.00491 0.03227 0.02228 ...
##  $ tBodyAccJerk-mean()-Z               : num  -0.10604 -0.00172 -0.01367 0.01214 0.00275 ...
##  $ tBodyAccJerk-std()-X                : num  -0.907 -0.949 -0.991 -0.991 -0.992 ...
##  $ tBodyAccJerk-std()-Y                : num  -0.938 -0.973 -0.971 -0.973 -0.979 ...
##  $ tBodyAccJerk-std()-Z                : num  -0.936 -0.978 -0.973 -0.976 -0.987 ...
##  $ tBodyAccJerk-mad()-X                : num  -0.916 -0.969 -0.991 -0.99 -0.991 ...
##  $ tBodyAccJerk-mad()-Y                : num  -0.937 -0.974 -0.973 -0.973 -0.977 ...
##  $ tBodyAccJerk-mad()-Z                : num  -0.949 -0.979 -0.975 -0.978 -0.985 ...
##  $ tBodyAccJerk-max()-X                : num  -0.903 -0.915 -0.992 -0.992 -0.994 ...
##  $ tBodyAccJerk-max()-Y                : num  -0.95 -0.981 -0.975 -0.975 -0.986 ...
##  $ tBodyAccJerk-max()-Z                : num  -0.891 -0.978 -0.962 -0.962 -0.986 ...
##  $ tBodyAccJerk-min()-X                : num  0.898 0.898 0.994 0.994 0.994 ...
##  $ tBodyAccJerk-min()-Y                : num  0.95 0.968 0.976 0.976 0.98 ...
##  $ tBodyAccJerk-min()-Z                : num  0.946 0.966 0.966 0.97 0.985 ...
##  $ tBodyAccJerk-sma()                  : num  -0.931 -0.974 -0.982 -0.983 -0.987 ...
##  $ tBodyAccJerk-energy()-X             : num  -0.995 -0.998 -1 -1 -1 ...
##  $ tBodyAccJerk-energy()-Y             : num  -0.997 -0.999 -0.999 -0.999 -1 ...
##   [list output truncated]
</code></pre>

<p>Load training sets :</p>

<pre><code class="r">xtrain &lt;- read.table(&quot;train/X_train.txt&quot;)
names(xtrain) &lt;- features$name
ytrain &lt;- read.table(&quot;train/y_train.txt&quot;)
names(ytrain) &lt;- c(&quot;activity_id&quot;)
strain &lt;- read.table(&quot;train/subject_train.txt&quot;)
names(strain) &lt;- c(&quot;subject_id&quot;)
</code></pre>

<p>Merge training sets side by side :</p>

<pre><code class="r">train &lt;- cbind(strain, xtrain, ytrain)
</code></pre>

<p>Let&#39;s check dimensions and characteristics of our training data :</p>

<pre><code class="r">str(train)
</code></pre>

<pre><code>## &#39;data.frame&#39;:    7352 obs. of  563 variables:
##  $ subject_id                          : int  1 1 1 1 1 1 1 1 1 1 ...
##  $ tBodyAcc-mean()-X                   : num  0.289 0.278 0.28 0.279 0.277 ...
##  $ tBodyAcc-mean()-Y                   : num  -0.0203 -0.0164 -0.0195 -0.0262 -0.0166 ...
##  $ tBodyAcc-mean()-Z                   : num  -0.133 -0.124 -0.113 -0.123 -0.115 ...
##  $ tBodyAcc-std()-X                    : num  -0.995 -0.998 -0.995 -0.996 -0.998 ...
##  $ tBodyAcc-std()-Y                    : num  -0.983 -0.975 -0.967 -0.983 -0.981 ...
##  $ tBodyAcc-std()-Z                    : num  -0.914 -0.96 -0.979 -0.991 -0.99 ...
##  $ tBodyAcc-mad()-X                    : num  -0.995 -0.999 -0.997 -0.997 -0.998 ...
##  $ tBodyAcc-mad()-Y                    : num  -0.983 -0.975 -0.964 -0.983 -0.98 ...
##  $ tBodyAcc-mad()-Z                    : num  -0.924 -0.958 -0.977 -0.989 -0.99 ...
##  $ tBodyAcc-max()-X                    : num  -0.935 -0.943 -0.939 -0.939 -0.942 ...
##  $ tBodyAcc-max()-Y                    : num  -0.567 -0.558 -0.558 -0.576 -0.569 ...
##  $ tBodyAcc-max()-Z                    : num  -0.744 -0.818 -0.818 -0.83 -0.825 ...
##  $ tBodyAcc-min()-X                    : num  0.853 0.849 0.844 0.844 0.849 ...
##  $ tBodyAcc-min()-Y                    : num  0.686 0.686 0.682 0.682 0.683 ...
##  $ tBodyAcc-min()-Z                    : num  0.814 0.823 0.839 0.838 0.838 ...
##  $ tBodyAcc-sma()                      : num  -0.966 -0.982 -0.983 -0.986 -0.993 ...
##  $ tBodyAcc-energy()-X                 : num  -1 -1 -1 -1 -1 ...
##  $ tBodyAcc-energy()-Y                 : num  -1 -1 -1 -1 -1 ...
##  $ tBodyAcc-energy()-Z                 : num  -0.995 -0.998 -0.999 -1 -1 ...
##  $ tBodyAcc-iqr()-X                    : num  -0.994 -0.999 -0.997 -0.997 -0.998 ...
##  $ tBodyAcc-iqr()-Y                    : num  -0.988 -0.978 -0.965 -0.984 -0.981 ...
##  $ tBodyAcc-iqr()-Z                    : num  -0.943 -0.948 -0.975 -0.986 -0.991 ...
##  $ tBodyAcc-entropy()-X                : num  -0.408 -0.715 -0.592 -0.627 -0.787 ...
##  $ tBodyAcc-entropy()-Y                : num  -0.679 -0.501 -0.486 -0.851 -0.559 ...
##  $ tBodyAcc-entropy()-Z                : num  -0.602 -0.571 -0.571 -0.912 -0.761 ...
##  $ tBodyAcc-arCoeff()-X,1              : num  0.9293 0.6116 0.273 0.0614 0.3133 ...
##  $ tBodyAcc-arCoeff()-X,2              : num  -0.853 -0.3295 -0.0863 0.0748 -0.1312 ...
##  $ tBodyAcc-arCoeff()-X,3              : num  0.36 0.284 0.337 0.198 0.191 ...
##  $ tBodyAcc-arCoeff()-X,4              : num  -0.0585 0.2846 -0.1647 -0.2643 0.0869 ...
##  $ tBodyAcc-arCoeff()-Y,1              : num  0.2569 0.1157 0.0172 0.0725 0.2576 ...
##  $ tBodyAcc-arCoeff()-Y,2              : num  -0.2248 -0.091 -0.0745 -0.1553 -0.2725 ...
##  $ tBodyAcc-arCoeff()-Y,3              : num  0.264 0.294 0.342 0.323 0.435 ...
##  $ tBodyAcc-arCoeff()-Y,4              : num  -0.0952 -0.2812 -0.3326 -0.1708 -0.3154 ...
##  $ tBodyAcc-arCoeff()-Z,1              : num  0.279 0.086 0.239 0.295 0.44 ...
##  $ tBodyAcc-arCoeff()-Z,2              : num  -0.4651 -0.0222 -0.1362 -0.3061 -0.2691 ...
##  $ tBodyAcc-arCoeff()-Z,3              : num  0.4919 -0.0167 0.1739 0.4821 0.1794 ...
##  $ tBodyAcc-arCoeff()-Z,4              : num  -0.191 -0.221 -0.299 -0.47 -0.089 ...
##  $ tBodyAcc-correlation()-X,Y          : num  0.3763 -0.0134 -0.1247 -0.3057 -0.1558 ...
##  $ tBodyAcc-correlation()-X,Z          : num  0.4351 -0.0727 -0.1811 -0.3627 -0.1898 ...
##  $ tBodyAcc-correlation()-Y,Z          : num  0.661 0.579 0.609 0.507 0.599 ...
##  $ tGravityAcc-mean()-X                : num  0.963 0.967 0.967 0.968 0.968 ...
##  $ tGravityAcc-mean()-Y                : num  -0.141 -0.142 -0.142 -0.144 -0.149 ...
##  $ tGravityAcc-mean()-Z                : num  0.1154 0.1094 0.1019 0.0999 0.0945 ...
##  $ tGravityAcc-std()-X                 : num  -0.985 -0.997 -1 -0.997 -0.998 ...
##  $ tGravityAcc-std()-Y                 : num  -0.982 -0.989 -0.993 -0.981 -0.988 ...
##  $ tGravityAcc-std()-Z                 : num  -0.878 -0.932 -0.993 -0.978 -0.979 ...
##  $ tGravityAcc-mad()-X                 : num  -0.985 -0.998 -1 -0.996 -0.998 ...
##  $ tGravityAcc-mad()-Y                 : num  -0.984 -0.99 -0.993 -0.981 -0.989 ...
##  $ tGravityAcc-mad()-Z                 : num  -0.895 -0.933 -0.993 -0.978 -0.979 ...
##  $ tGravityAcc-max()-X                 : num  0.892 0.892 0.892 0.894 0.894 ...
##  $ tGravityAcc-max()-Y                 : num  -0.161 -0.161 -0.164 -0.164 -0.167 ...
##  $ tGravityAcc-max()-Z                 : num  0.1247 0.1226 0.0946 0.0934 0.0917 ...
##  $ tGravityAcc-min()-X                 : num  0.977 0.985 0.987 0.987 0.987 ...
##  $ tGravityAcc-min()-Y                 : num  -0.123 -0.115 -0.115 -0.121 -0.122 ...
##  $ tGravityAcc-min()-Z                 : num  0.0565 0.1028 0.1028 0.0958 0.0941 ...
##  $ tGravityAcc-sma()                   : num  -0.375 -0.383 -0.402 -0.4 -0.4 ...
##  $ tGravityAcc-energy()-X              : num  0.899 0.908 0.909 0.911 0.912 ...
##  $ tGravityAcc-energy()-Y              : num  -0.971 -0.971 -0.97 -0.969 -0.967 ...
##  $ tGravityAcc-energy()-Z              : num  -0.976 -0.979 -0.982 -0.982 -0.984 ...
##  $ tGravityAcc-iqr()-X                 : num  -0.984 -0.999 -1 -0.996 -0.998 ...
##  $ tGravityAcc-iqr()-Y                 : num  -0.989 -0.99 -0.992 -0.981 -0.991 ...
##  $ tGravityAcc-iqr()-Z                 : num  -0.918 -0.942 -0.993 -0.98 -0.98 ...
##  $ tGravityAcc-entropy()-X             : num  -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 ...
##  $ tGravityAcc-entropy()-Y             : num  -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 ...
##  $ tGravityAcc-entropy()-Z             : num  0.114 -0.21 -0.927 -0.596 -0.617 ...
##  $ tGravityAcc-arCoeff()-X,1           : num  -0.59042 -0.41006 0.00223 -0.06493 -0.25727 ...
##  $ tGravityAcc-arCoeff()-X,2           : num  0.5911 0.4139 0.0275 0.0754 0.2689 ...
##  $ tGravityAcc-arCoeff()-X,3           : num  -0.5918 -0.4176 -0.0567 -0.0858 -0.2807 ...
##  $ tGravityAcc-arCoeff()-X,4           : num  0.5925 0.4213 0.0855 0.0962 0.2926 ...
##  $ tGravityAcc-arCoeff()-Y,1           : num  -0.745 -0.196 -0.329 -0.295 -0.167 ...
##  $ tGravityAcc-arCoeff()-Y,2           : num  0.7209 0.1253 0.2705 0.2283 0.0899 ...
##  $ tGravityAcc-arCoeff()-Y,3           : num  -0.7124 -0.1056 -0.2545 -0.2063 -0.0663 ...
##  $ tGravityAcc-arCoeff()-Y,4           : num  0.7113 0.1091 0.2576 0.2048 0.0671 ...
##  $ tGravityAcc-arCoeff()-Z,1           : num  -0.995 -0.834 -0.705 -0.385 -0.237 ...
##  $ tGravityAcc-arCoeff()-Z,2           : num  0.996 0.834 0.714 0.386 0.239 ...
##  $ tGravityAcc-arCoeff()-Z,3           : num  -0.996 -0.834 -0.723 -0.387 -0.241 ...
##  $ tGravityAcc-arCoeff()-Z,4           : num  0.992 0.83 0.729 0.385 0.241 ...
##  $ tGravityAcc-correlation()-X,Y       : num  0.57 -0.831 -0.181 -0.991 -0.408 ...
##  $ tGravityAcc-correlation()-X,Z       : num  0.439 -0.866 0.338 -0.969 -0.185 ...
##  $ tGravityAcc-correlation()-Y,Z       : num  0.987 0.974 0.643 0.984 0.965 ...
##  $ tBodyAccJerk-mean()-X               : num  0.078 0.074 0.0736 0.0773 0.0734 ...
##  $ tBodyAccJerk-mean()-Y               : num  0.005 0.00577 0.0031 0.02006 0.01912 ...
##  $ tBodyAccJerk-mean()-Z               : num  -0.06783 0.02938 -0.00905 -0.00986 0.01678 ...
##  $ tBodyAccJerk-std()-X                : num  -0.994 -0.996 -0.991 -0.993 -0.996 ...
##  $ tBodyAccJerk-std()-Y                : num  -0.988 -0.981 -0.981 -0.988 -0.988 ...
##  $ tBodyAccJerk-std()-Z                : num  -0.994 -0.992 -0.99 -0.993 -0.992 ...
##  $ tBodyAccJerk-mad()-X                : num  -0.994 -0.996 -0.991 -0.994 -0.997 ...
##  $ tBodyAccJerk-mad()-Y                : num  -0.986 -0.979 -0.979 -0.986 -0.987 ...
##  $ tBodyAccJerk-mad()-Z                : num  -0.993 -0.991 -0.987 -0.991 -0.991 ...
##  $ tBodyAccJerk-max()-X                : num  -0.985 -0.995 -0.987 -0.987 -0.997 ...
##  $ tBodyAccJerk-max()-Y                : num  -0.992 -0.979 -0.979 -0.992 -0.992 ...
##  $ tBodyAccJerk-max()-Z                : num  -0.993 -0.992 -0.992 -0.99 -0.99 ...
##  $ tBodyAccJerk-min()-X                : num  0.99 0.993 0.988 0.988 0.994 ...
##  $ tBodyAccJerk-min()-Y                : num  0.992 0.992 0.992 0.993 0.993 ...
##  $ tBodyAccJerk-min()-Z                : num  0.991 0.989 0.989 0.993 0.986 ...
##  $ tBodyAccJerk-sma()                  : num  -0.994 -0.991 -0.988 -0.993 -0.994 ...
##  $ tBodyAccJerk-energy()-X             : num  -1 -1 -1 -1 -1 ...
##  $ tBodyAccJerk-energy()-Y             : num  -1 -1 -1 -1 -1 ...
##   [list output truncated]
</code></pre>

<p>Now let&#39;s append training and test sets together (on top of each other, by rows) :</p>

<pre><code class="r">full &lt;- rbind(train, test)
str(full)
</code></pre>

<pre><code>## &#39;data.frame&#39;:    10299 obs. of  563 variables:
##  $ subject_id                          : int  1 1 1 1 1 1 1 1 1 1 ...
##  $ tBodyAcc-mean()-X                   : num  0.289 0.278 0.28 0.279 0.277 ...
##  $ tBodyAcc-mean()-Y                   : num  -0.0203 -0.0164 -0.0195 -0.0262 -0.0166 ...
##  $ tBodyAcc-mean()-Z                   : num  -0.133 -0.124 -0.113 -0.123 -0.115 ...
##  $ tBodyAcc-std()-X                    : num  -0.995 -0.998 -0.995 -0.996 -0.998 ...
##  $ tBodyAcc-std()-Y                    : num  -0.983 -0.975 -0.967 -0.983 -0.981 ...
##  $ tBodyAcc-std()-Z                    : num  -0.914 -0.96 -0.979 -0.991 -0.99 ...
##  $ tBodyAcc-mad()-X                    : num  -0.995 -0.999 -0.997 -0.997 -0.998 ...
##  $ tBodyAcc-mad()-Y                    : num  -0.983 -0.975 -0.964 -0.983 -0.98 ...
##  $ tBodyAcc-mad()-Z                    : num  -0.924 -0.958 -0.977 -0.989 -0.99 ...
##  $ tBodyAcc-max()-X                    : num  -0.935 -0.943 -0.939 -0.939 -0.942 ...
##  $ tBodyAcc-max()-Y                    : num  -0.567 -0.558 -0.558 -0.576 -0.569 ...
##  $ tBodyAcc-max()-Z                    : num  -0.744 -0.818 -0.818 -0.83 -0.825 ...
##  $ tBodyAcc-min()-X                    : num  0.853 0.849 0.844 0.844 0.849 ...
##  $ tBodyAcc-min()-Y                    : num  0.686 0.686 0.682 0.682 0.683 ...
##  $ tBodyAcc-min()-Z                    : num  0.814 0.823 0.839 0.838 0.838 ...
##  $ tBodyAcc-sma()                      : num  -0.966 -0.982 -0.983 -0.986 -0.993 ...
##  $ tBodyAcc-energy()-X                 : num  -1 -1 -1 -1 -1 ...
##  $ tBodyAcc-energy()-Y                 : num  -1 -1 -1 -1 -1 ...
##  $ tBodyAcc-energy()-Z                 : num  -0.995 -0.998 -0.999 -1 -1 ...
##  $ tBodyAcc-iqr()-X                    : num  -0.994 -0.999 -0.997 -0.997 -0.998 ...
##  $ tBodyAcc-iqr()-Y                    : num  -0.988 -0.978 -0.965 -0.984 -0.981 ...
##  $ tBodyAcc-iqr()-Z                    : num  -0.943 -0.948 -0.975 -0.986 -0.991 ...
##  $ tBodyAcc-entropy()-X                : num  -0.408 -0.715 -0.592 -0.627 -0.787 ...
##  $ tBodyAcc-entropy()-Y                : num  -0.679 -0.501 -0.486 -0.851 -0.559 ...
##  $ tBodyAcc-entropy()-Z                : num  -0.602 -0.571 -0.571 -0.912 -0.761 ...
##  $ tBodyAcc-arCoeff()-X,1              : num  0.9293 0.6116 0.273 0.0614 0.3133 ...
##  $ tBodyAcc-arCoeff()-X,2              : num  -0.853 -0.3295 -0.0863 0.0748 -0.1312 ...
##  $ tBodyAcc-arCoeff()-X,3              : num  0.36 0.284 0.337 0.198 0.191 ...
##  $ tBodyAcc-arCoeff()-X,4              : num  -0.0585 0.2846 -0.1647 -0.2643 0.0869 ...
##  $ tBodyAcc-arCoeff()-Y,1              : num  0.2569 0.1157 0.0172 0.0725 0.2576 ...
##  $ tBodyAcc-arCoeff()-Y,2              : num  -0.2248 -0.091 -0.0745 -0.1553 -0.2725 ...
##  $ tBodyAcc-arCoeff()-Y,3              : num  0.264 0.294 0.342 0.323 0.435 ...
##  $ tBodyAcc-arCoeff()-Y,4              : num  -0.0952 -0.2812 -0.3326 -0.1708 -0.3154 ...
##  $ tBodyAcc-arCoeff()-Z,1              : num  0.279 0.086 0.239 0.295 0.44 ...
##  $ tBodyAcc-arCoeff()-Z,2              : num  -0.4651 -0.0222 -0.1362 -0.3061 -0.2691 ...
##  $ tBodyAcc-arCoeff()-Z,3              : num  0.4919 -0.0167 0.1739 0.4821 0.1794 ...
##  $ tBodyAcc-arCoeff()-Z,4              : num  -0.191 -0.221 -0.299 -0.47 -0.089 ...
##  $ tBodyAcc-correlation()-X,Y          : num  0.3763 -0.0134 -0.1247 -0.3057 -0.1558 ...
##  $ tBodyAcc-correlation()-X,Z          : num  0.4351 -0.0727 -0.1811 -0.3627 -0.1898 ...
##  $ tBodyAcc-correlation()-Y,Z          : num  0.661 0.579 0.609 0.507 0.599 ...
##  $ tGravityAcc-mean()-X                : num  0.963 0.967 0.967 0.968 0.968 ...
##  $ tGravityAcc-mean()-Y                : num  -0.141 -0.142 -0.142 -0.144 -0.149 ...
##  $ tGravityAcc-mean()-Z                : num  0.1154 0.1094 0.1019 0.0999 0.0945 ...
##  $ tGravityAcc-std()-X                 : num  -0.985 -0.997 -1 -0.997 -0.998 ...
##  $ tGravityAcc-std()-Y                 : num  -0.982 -0.989 -0.993 -0.981 -0.988 ...
##  $ tGravityAcc-std()-Z                 : num  -0.878 -0.932 -0.993 -0.978 -0.979 ...
##  $ tGravityAcc-mad()-X                 : num  -0.985 -0.998 -1 -0.996 -0.998 ...
##  $ tGravityAcc-mad()-Y                 : num  -0.984 -0.99 -0.993 -0.981 -0.989 ...
##  $ tGravityAcc-mad()-Z                 : num  -0.895 -0.933 -0.993 -0.978 -0.979 ...
##  $ tGravityAcc-max()-X                 : num  0.892 0.892 0.892 0.894 0.894 ...
##  $ tGravityAcc-max()-Y                 : num  -0.161 -0.161 -0.164 -0.164 -0.167 ...
##  $ tGravityAcc-max()-Z                 : num  0.1247 0.1226 0.0946 0.0934 0.0917 ...
##  $ tGravityAcc-min()-X                 : num  0.977 0.985 0.987 0.987 0.987 ...
##  $ tGravityAcc-min()-Y                 : num  -0.123 -0.115 -0.115 -0.121 -0.122 ...
##  $ tGravityAcc-min()-Z                 : num  0.0565 0.1028 0.1028 0.0958 0.0941 ...
##  $ tGravityAcc-sma()                   : num  -0.375 -0.383 -0.402 -0.4 -0.4 ...
##  $ tGravityAcc-energy()-X              : num  0.899 0.908 0.909 0.911 0.912 ...
##  $ tGravityAcc-energy()-Y              : num  -0.971 -0.971 -0.97 -0.969 -0.967 ...
##  $ tGravityAcc-energy()-Z              : num  -0.976 -0.979 -0.982 -0.982 -0.984 ...
##  $ tGravityAcc-iqr()-X                 : num  -0.984 -0.999 -1 -0.996 -0.998 ...
##  $ tGravityAcc-iqr()-Y                 : num  -0.989 -0.99 -0.992 -0.981 -0.991 ...
##  $ tGravityAcc-iqr()-Z                 : num  -0.918 -0.942 -0.993 -0.98 -0.98 ...
##  $ tGravityAcc-entropy()-X             : num  -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 ...
##  $ tGravityAcc-entropy()-Y             : num  -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 ...
##  $ tGravityAcc-entropy()-Z             : num  0.114 -0.21 -0.927 -0.596 -0.617 ...
##  $ tGravityAcc-arCoeff()-X,1           : num  -0.59042 -0.41006 0.00223 -0.06493 -0.25727 ...
##  $ tGravityAcc-arCoeff()-X,2           : num  0.5911 0.4139 0.0275 0.0754 0.2689 ...
##  $ tGravityAcc-arCoeff()-X,3           : num  -0.5918 -0.4176 -0.0567 -0.0858 -0.2807 ...
##  $ tGravityAcc-arCoeff()-X,4           : num  0.5925 0.4213 0.0855 0.0962 0.2926 ...
##  $ tGravityAcc-arCoeff()-Y,1           : num  -0.745 -0.196 -0.329 -0.295 -0.167 ...
##  $ tGravityAcc-arCoeff()-Y,2           : num  0.7209 0.1253 0.2705 0.2283 0.0899 ...
##  $ tGravityAcc-arCoeff()-Y,3           : num  -0.7124 -0.1056 -0.2545 -0.2063 -0.0663 ...
##  $ tGravityAcc-arCoeff()-Y,4           : num  0.7113 0.1091 0.2576 0.2048 0.0671 ...
##  $ tGravityAcc-arCoeff()-Z,1           : num  -0.995 -0.834 -0.705 -0.385 -0.237 ...
##  $ tGravityAcc-arCoeff()-Z,2           : num  0.996 0.834 0.714 0.386 0.239 ...
##  $ tGravityAcc-arCoeff()-Z,3           : num  -0.996 -0.834 -0.723 -0.387 -0.241 ...
##  $ tGravityAcc-arCoeff()-Z,4           : num  0.992 0.83 0.729 0.385 0.241 ...
##  $ tGravityAcc-correlation()-X,Y       : num  0.57 -0.831 -0.181 -0.991 -0.408 ...
##  $ tGravityAcc-correlation()-X,Z       : num  0.439 -0.866 0.338 -0.969 -0.185 ...
##  $ tGravityAcc-correlation()-Y,Z       : num  0.987 0.974 0.643 0.984 0.965 ...
##  $ tBodyAccJerk-mean()-X               : num  0.078 0.074 0.0736 0.0773 0.0734 ...
##  $ tBodyAccJerk-mean()-Y               : num  0.005 0.00577 0.0031 0.02006 0.01912 ...
##  $ tBodyAccJerk-mean()-Z               : num  -0.06783 0.02938 -0.00905 -0.00986 0.01678 ...
##  $ tBodyAccJerk-std()-X                : num  -0.994 -0.996 -0.991 -0.993 -0.996 ...
##  $ tBodyAccJerk-std()-Y                : num  -0.988 -0.981 -0.981 -0.988 -0.988 ...
##  $ tBodyAccJerk-std()-Z                : num  -0.994 -0.992 -0.99 -0.993 -0.992 ...
##  $ tBodyAccJerk-mad()-X                : num  -0.994 -0.996 -0.991 -0.994 -0.997 ...
##  $ tBodyAccJerk-mad()-Y                : num  -0.986 -0.979 -0.979 -0.986 -0.987 ...
##  $ tBodyAccJerk-mad()-Z                : num  -0.993 -0.991 -0.987 -0.991 -0.991 ...
##  $ tBodyAccJerk-max()-X                : num  -0.985 -0.995 -0.987 -0.987 -0.997 ...
##  $ tBodyAccJerk-max()-Y                : num  -0.992 -0.979 -0.979 -0.992 -0.992 ...
##  $ tBodyAccJerk-max()-Z                : num  -0.993 -0.992 -0.992 -0.99 -0.99 ...
##  $ tBodyAccJerk-min()-X                : num  0.99 0.993 0.988 0.988 0.994 ...
##  $ tBodyAccJerk-min()-Y                : num  0.992 0.992 0.992 0.993 0.993 ...
##  $ tBodyAccJerk-min()-Z                : num  0.991 0.989 0.989 0.993 0.986 ...
##  $ tBodyAccJerk-sma()                  : num  -0.994 -0.991 -0.988 -0.993 -0.994 ...
##  $ tBodyAccJerk-energy()-X             : num  -1 -1 -1 -1 -1 ...
##  $ tBodyAccJerk-energy()-Y             : num  -1 -1 -1 -1 -1 ...
##   [list output truncated]
</code></pre>

<h3>Step 2 - select specific features</h3>

<p>Pattern matching on columns names can be done with matchcols function in gdata package.</p>

<pre><code class="r">install.packages(&quot;gdata&quot;, repos = &quot;http://cran.us.r-project.org&quot;)  # line added Tue 29th Apr
</code></pre>

<pre><code>## 
## The downloaded binary packages are in
##  /var/folders/nq/4hcmzrt50w7872sc8zh0drzw0000gn/T//RtmpZZMque/downloaded_packages
</code></pre>

<pre><code class="r">library(gdata)
</code></pre>

<pre><code>## gdata: read.xls support for &#39;XLS&#39; (Excel 97-2004) files ENABLED.
## 
## gdata: read.xls support for &#39;XLSX&#39; (Excel 2007+) files ENABLED.
## 
## Attaching package: &#39;gdata&#39;
## 
## The following object is masked from &#39;package:stats&#39;:
## 
##     nobs
## 
## The following object is masked from &#39;package:utils&#39;:
## 
##     object.size
</code></pre>

<p>Match features whose name contain string &ldquo;mean()&rdquo; or string &ldquo;std()&rdquo; using a regular expression (we make sure to use double backslash to escape parenthesis) :</p>

<pre><code class="r">meanstdcols &lt;- matchcols(full, with = c(&quot;mean\\(\\)|std\\(\\)&quot;))
</code></pre>

<p>Ok now let&#39;s build a lighter dataset with subject, activity and only mean and std features :</p>

<pre><code class="r">sams &lt;- full[, c(&quot;subject_id&quot;, &quot;activity_id&quot;, meanstdcols)]
</code></pre>

<h3>Step 3 - add activity labels</h3>

<p>Load activty labels from provided file :</p>

<pre><code class="r">activity &lt;- read.table(&quot;activity_labels.txt&quot;, stringsAsFactors = FALSE)
names(activity) &lt;- c(&quot;activity_id&quot;, &quot;activity_label&quot;)
</code></pre>

<p>Include explicit activity labels in dataset by merging on activity id :</p>

<pre><code class="r">samsExplicit &lt;- merge(sams, activity, by = &quot;activity_id&quot;)
</code></pre>

<h3>Step 4 - make feature names more explicit</h3>

<p>After checking on the forums there is consensus about a possible typo in the question (see <a href="https://class.coursera.org/getdata-002/forum/thread?thread_id=28#post-461">https://class.coursera.org/getdata-002/forum/thread?thread_id=28#post-461</a>). I could have blindly applied gsub to all names. I decided to be a bit more selective and chose to loop only over feature names to make them more explicit.</p>

<pre><code class="r">originalNames &lt;- names(samsExplicit)
dontTouch &lt;- c(&quot;activity_id&quot;, &quot;subject_id&quot;, &quot;activity_label&quot;)

for (i in 1:length(originalNames)) {
    name &lt;- originalNames[i]
    # tidy up only if current column name is a feature column name use naive
    # regular expressions to perform substitutions
    if (!name %in% dontTouch) {
        a &lt;- gsub(&quot;^t&quot;, &quot;Time Domain &quot;, name)
        a &lt;- gsub(&quot;^f&quot;, &quot;Frequency Domain &quot;, a)
        a &lt;- gsub(&quot;std\\(\\)&quot;, &quot;Standard Deviation &quot;, a)
        a &lt;- gsub(&quot;mean\\(\\)&quot;, &quot;Mean &quot;, a)
        a &lt;- gsub(&quot;-&quot;, &quot;&quot;, a)
        a &lt;- gsub(&quot;Acc&quot;, &quot;Linear Acceleration &quot;, a)
        a &lt;- gsub(&quot;Jerk&quot;, &quot;Jerk &quot;, a)
        a &lt;- gsub(&quot;Gyro&quot;, &quot;Angular Velocity &quot;, a)
        a &lt;- gsub(&quot;Mag&quot;, &quot;Magnitude &quot;, a)
        a &lt;- gsub(&quot;Body&quot;, &quot;Body &quot;, a)
        a &lt;- gsub(&quot;Gravity&quot;, &quot;Gravity &quot;, a)
        # proceed with renaming of current column
        names(samsExplicit)[names(samsExplicit) == name] &lt;- a
    }
}
</code></pre>

<p>Quick check of what our column names look like now :</p>

<pre><code class="r">names(samsExplicit)
</code></pre>

<pre><code>##  [1] &quot;activity_id&quot;                                                                      
##  [2] &quot;subject_id&quot;                                                                       
##  [3] &quot;Time Domain Body Linear Acceleration Mean X&quot;                                      
##  [4] &quot;Time Domain Body Linear Acceleration Mean Y&quot;                                      
##  [5] &quot;Time Domain Body Linear Acceleration Mean Z&quot;                                      
##  [6] &quot;Time Domain Body Linear Acceleration Standard Deviation X&quot;                        
##  [7] &quot;Time Domain Body Linear Acceleration Standard Deviation Y&quot;                        
##  [8] &quot;Time Domain Body Linear Acceleration Standard Deviation Z&quot;                        
##  [9] &quot;Time Domain Gravity Linear Acceleration Mean X&quot;                                   
## [10] &quot;Time Domain Gravity Linear Acceleration Mean Y&quot;                                   
## [11] &quot;Time Domain Gravity Linear Acceleration Mean Z&quot;                                   
## [12] &quot;Time Domain Gravity Linear Acceleration Standard Deviation X&quot;                     
## [13] &quot;Time Domain Gravity Linear Acceleration Standard Deviation Y&quot;                     
## [14] &quot;Time Domain Gravity Linear Acceleration Standard Deviation Z&quot;                     
## [15] &quot;Time Domain Body Linear Acceleration Jerk Mean X&quot;                                 
## [16] &quot;Time Domain Body Linear Acceleration Jerk Mean Y&quot;                                 
## [17] &quot;Time Domain Body Linear Acceleration Jerk Mean Z&quot;                                 
## [18] &quot;Time Domain Body Linear Acceleration Jerk Standard Deviation X&quot;                   
## [19] &quot;Time Domain Body Linear Acceleration Jerk Standard Deviation Y&quot;                   
## [20] &quot;Time Domain Body Linear Acceleration Jerk Standard Deviation Z&quot;                   
## [21] &quot;Time Domain Body Angular Velocity Mean X&quot;                                         
## [22] &quot;Time Domain Body Angular Velocity Mean Y&quot;                                         
## [23] &quot;Time Domain Body Angular Velocity Mean Z&quot;                                         
## [24] &quot;Time Domain Body Angular Velocity Standard Deviation X&quot;                           
## [25] &quot;Time Domain Body Angular Velocity Standard Deviation Y&quot;                           
## [26] &quot;Time Domain Body Angular Velocity Standard Deviation Z&quot;                           
## [27] &quot;Time Domain Body Angular Velocity Jerk Mean X&quot;                                    
## [28] &quot;Time Domain Body Angular Velocity Jerk Mean Y&quot;                                    
## [29] &quot;Time Domain Body Angular Velocity Jerk Mean Z&quot;                                    
## [30] &quot;Time Domain Body Angular Velocity Jerk Standard Deviation X&quot;                      
## [31] &quot;Time Domain Body Angular Velocity Jerk Standard Deviation Y&quot;                      
## [32] &quot;Time Domain Body Angular Velocity Jerk Standard Deviation Z&quot;                      
## [33] &quot;Time Domain Body Linear Acceleration Magnitude Mean &quot;                             
## [34] &quot;Time Domain Body Linear Acceleration Magnitude Standard Deviation &quot;               
## [35] &quot;Time Domain Gravity Linear Acceleration Magnitude Mean &quot;                          
## [36] &quot;Time Domain Gravity Linear Acceleration Magnitude Standard Deviation &quot;            
## [37] &quot;Time Domain Body Linear Acceleration Jerk Magnitude Mean &quot;                        
## [38] &quot;Time Domain Body Linear Acceleration Jerk Magnitude Standard Deviation &quot;          
## [39] &quot;Time Domain Body Angular Velocity Magnitude Mean &quot;                                
## [40] &quot;Time Domain Body Angular Velocity Magnitude Standard Deviation &quot;                  
## [41] &quot;Time Domain Body Angular Velocity Jerk Magnitude Mean &quot;                           
## [42] &quot;Time Domain Body Angular Velocity Jerk Magnitude Standard Deviation &quot;             
## [43] &quot;Frequency Domain Body Linear Acceleration Mean X&quot;                                 
## [44] &quot;Frequency Domain Body Linear Acceleration Mean Y&quot;                                 
## [45] &quot;Frequency Domain Body Linear Acceleration Mean Z&quot;                                 
## [46] &quot;Frequency Domain Body Linear Acceleration Standard Deviation X&quot;                   
## [47] &quot;Frequency Domain Body Linear Acceleration Standard Deviation Y&quot;                   
## [48] &quot;Frequency Domain Body Linear Acceleration Standard Deviation Z&quot;                   
## [49] &quot;Frequency Domain Body Linear Acceleration Jerk Mean X&quot;                            
## [50] &quot;Frequency Domain Body Linear Acceleration Jerk Mean Y&quot;                            
## [51] &quot;Frequency Domain Body Linear Acceleration Jerk Mean Z&quot;                            
## [52] &quot;Frequency Domain Body Linear Acceleration Jerk Standard Deviation X&quot;              
## [53] &quot;Frequency Domain Body Linear Acceleration Jerk Standard Deviation Y&quot;              
## [54] &quot;Frequency Domain Body Linear Acceleration Jerk Standard Deviation Z&quot;              
## [55] &quot;Frequency Domain Body Angular Velocity Mean X&quot;                                    
## [56] &quot;Frequency Domain Body Angular Velocity Mean Y&quot;                                    
## [57] &quot;Frequency Domain Body Angular Velocity Mean Z&quot;                                    
## [58] &quot;Frequency Domain Body Angular Velocity Standard Deviation X&quot;                      
## [59] &quot;Frequency Domain Body Angular Velocity Standard Deviation Y&quot;                      
## [60] &quot;Frequency Domain Body Angular Velocity Standard Deviation Z&quot;                      
## [61] &quot;Frequency Domain Body Linear Acceleration Magnitude Mean &quot;                        
## [62] &quot;Frequency Domain Body Linear Acceleration Magnitude Standard Deviation &quot;          
## [63] &quot;Frequency Domain Body Body Linear Acceleration Jerk Magnitude Mean &quot;              
## [64] &quot;Frequency Domain Body Body Linear Acceleration Jerk Magnitude Standard Deviation &quot;
## [65] &quot;Frequency Domain Body Body Angular Velocity Magnitude Mean &quot;                      
## [66] &quot;Frequency Domain Body Body Angular Velocity Magnitude Standard Deviation &quot;        
## [67] &quot;Frequency Domain Body Body Angular Velocity Jerk Magnitude Mean &quot;                 
## [68] &quot;Frequency Domain Body Body Angular Velocity Jerk Magnitude Standard Deviation &quot;   
## [69] &quot;activity_label&quot;
</code></pre>

<h3>Step 5 - compute aggregates and save</h3>

<p>Let&#39;s create a new dataset showing means of all feature columns grouped by subject_id and activity_label. Since there are 30 individuals and 6 activities, we should end up with 180 rows in the result data frame. We specify feature colums with robust named exclusion rather than specific indices inclusion.</p>

<pre><code class="r">samsAggregate &lt;- aggregate(samsExplicit[, -which(names(samsExplicit) %in% dontTouch)], 
    by = list(samsExplicit$subject_id, samsExplicit$activity_label), FUN = mean)
</code></pre>

<p>Checking row count:</p>

<pre><code class="r">nrow(samsAggregate)
</code></pre>

<pre><code>## [1] 180
</code></pre>

<p>Checking our column names are preserved:</p>

<pre><code class="r">names(samsAggregate)
</code></pre>

<pre><code>##  [1] &quot;Group.1&quot;                                                                          
##  [2] &quot;Group.2&quot;                                                                          
##  [3] &quot;Time Domain Body Linear Acceleration Mean X&quot;                                      
##  [4] &quot;Time Domain Body Linear Acceleration Mean Y&quot;                                      
##  [5] &quot;Time Domain Body Linear Acceleration Mean Z&quot;                                      
##  [6] &quot;Time Domain Body Linear Acceleration Standard Deviation X&quot;                        
##  [7] &quot;Time Domain Body Linear Acceleration Standard Deviation Y&quot;                        
##  [8] &quot;Time Domain Body Linear Acceleration Standard Deviation Z&quot;                        
##  [9] &quot;Time Domain Gravity Linear Acceleration Mean X&quot;                                   
## [10] &quot;Time Domain Gravity Linear Acceleration Mean Y&quot;                                   
## [11] &quot;Time Domain Gravity Linear Acceleration Mean Z&quot;                                   
## [12] &quot;Time Domain Gravity Linear Acceleration Standard Deviation X&quot;                     
## [13] &quot;Time Domain Gravity Linear Acceleration Standard Deviation Y&quot;                     
## [14] &quot;Time Domain Gravity Linear Acceleration Standard Deviation Z&quot;                     
## [15] &quot;Time Domain Body Linear Acceleration Jerk Mean X&quot;                                 
## [16] &quot;Time Domain Body Linear Acceleration Jerk Mean Y&quot;                                 
## [17] &quot;Time Domain Body Linear Acceleration Jerk Mean Z&quot;                                 
## [18] &quot;Time Domain Body Linear Acceleration Jerk Standard Deviation X&quot;                   
## [19] &quot;Time Domain Body Linear Acceleration Jerk Standard Deviation Y&quot;                   
## [20] &quot;Time Domain Body Linear Acceleration Jerk Standard Deviation Z&quot;                   
## [21] &quot;Time Domain Body Angular Velocity Mean X&quot;                                         
## [22] &quot;Time Domain Body Angular Velocity Mean Y&quot;                                         
## [23] &quot;Time Domain Body Angular Velocity Mean Z&quot;                                         
## [24] &quot;Time Domain Body Angular Velocity Standard Deviation X&quot;                           
## [25] &quot;Time Domain Body Angular Velocity Standard Deviation Y&quot;                           
## [26] &quot;Time Domain Body Angular Velocity Standard Deviation Z&quot;                           
## [27] &quot;Time Domain Body Angular Velocity Jerk Mean X&quot;                                    
## [28] &quot;Time Domain Body Angular Velocity Jerk Mean Y&quot;                                    
## [29] &quot;Time Domain Body Angular Velocity Jerk Mean Z&quot;                                    
## [30] &quot;Time Domain Body Angular Velocity Jerk Standard Deviation X&quot;                      
## [31] &quot;Time Domain Body Angular Velocity Jerk Standard Deviation Y&quot;                      
## [32] &quot;Time Domain Body Angular Velocity Jerk Standard Deviation Z&quot;                      
## [33] &quot;Time Domain Body Linear Acceleration Magnitude Mean &quot;                             
## [34] &quot;Time Domain Body Linear Acceleration Magnitude Standard Deviation &quot;               
## [35] &quot;Time Domain Gravity Linear Acceleration Magnitude Mean &quot;                          
## [36] &quot;Time Domain Gravity Linear Acceleration Magnitude Standard Deviation &quot;            
## [37] &quot;Time Domain Body Linear Acceleration Jerk Magnitude Mean &quot;                        
## [38] &quot;Time Domain Body Linear Acceleration Jerk Magnitude Standard Deviation &quot;          
## [39] &quot;Time Domain Body Angular Velocity Magnitude Mean &quot;                                
## [40] &quot;Time Domain Body Angular Velocity Magnitude Standard Deviation &quot;                  
## [41] &quot;Time Domain Body Angular Velocity Jerk Magnitude Mean &quot;                           
## [42] &quot;Time Domain Body Angular Velocity Jerk Magnitude Standard Deviation &quot;             
## [43] &quot;Frequency Domain Body Linear Acceleration Mean X&quot;                                 
## [44] &quot;Frequency Domain Body Linear Acceleration Mean Y&quot;                                 
## [45] &quot;Frequency Domain Body Linear Acceleration Mean Z&quot;                                 
## [46] &quot;Frequency Domain Body Linear Acceleration Standard Deviation X&quot;                   
## [47] &quot;Frequency Domain Body Linear Acceleration Standard Deviation Y&quot;                   
## [48] &quot;Frequency Domain Body Linear Acceleration Standard Deviation Z&quot;                   
## [49] &quot;Frequency Domain Body Linear Acceleration Jerk Mean X&quot;                            
## [50] &quot;Frequency Domain Body Linear Acceleration Jerk Mean Y&quot;                            
## [51] &quot;Frequency Domain Body Linear Acceleration Jerk Mean Z&quot;                            
## [52] &quot;Frequency Domain Body Linear Acceleration Jerk Standard Deviation X&quot;              
## [53] &quot;Frequency Domain Body Linear Acceleration Jerk Standard Deviation Y&quot;              
## [54] &quot;Frequency Domain Body Linear Acceleration Jerk Standard Deviation Z&quot;              
## [55] &quot;Frequency Domain Body Angular Velocity Mean X&quot;                                    
## [56] &quot;Frequency Domain Body Angular Velocity Mean Y&quot;                                    
## [57] &quot;Frequency Domain Body Angular Velocity Mean Z&quot;                                    
## [58] &quot;Frequency Domain Body Angular Velocity Standard Deviation X&quot;                      
## [59] &quot;Frequency Domain Body Angular Velocity Standard Deviation Y&quot;                      
## [60] &quot;Frequency Domain Body Angular Velocity Standard Deviation Z&quot;                      
## [61] &quot;Frequency Domain Body Linear Acceleration Magnitude Mean &quot;                        
## [62] &quot;Frequency Domain Body Linear Acceleration Magnitude Standard Deviation &quot;          
## [63] &quot;Frequency Domain Body Body Linear Acceleration Jerk Magnitude Mean &quot;              
## [64] &quot;Frequency Domain Body Body Linear Acceleration Jerk Magnitude Standard Deviation &quot;
## [65] &quot;Frequency Domain Body Body Angular Velocity Magnitude Mean &quot;                      
## [66] &quot;Frequency Domain Body Body Angular Velocity Magnitude Standard Deviation &quot;        
## [67] &quot;Frequency Domain Body Body Angular Velocity Jerk Magnitude Mean &quot;                 
## [68] &quot;Frequency Domain Body Body Angular Velocity Jerk Magnitude Standard Deviation &quot;
</code></pre>

<p>Bummer, the aggregate function renamed our grouped by cols, let&#39;s fix this.</p>

<pre><code class="r">names(samsAggregate)[names(samsAggregate) == &quot;Group.1&quot;] &lt;- &quot;subject_id&quot;
names(samsAggregate)[names(samsAggregate) == &quot;Group.2&quot;] &lt;- &quot;activity_label&quot;
head(samsAggregate[, 1:3], n = 60)
</code></pre>

<pre><code>##    subject_id activity_label Time Domain Body Linear Acceleration Mean X
## 1           1         LAYING                                      0.2216
## 2           2         LAYING                                      0.2814
## 3           3         LAYING                                      0.2755
## 4           4         LAYING                                      0.2636
## 5           5         LAYING                                      0.2783
## 6           6         LAYING                                      0.2487
## 7           7         LAYING                                      0.2502
## 8           8         LAYING                                      0.2613
## 9           9         LAYING                                      0.2592
## 10         10         LAYING                                      0.2802
## 11         11         LAYING                                      0.2806
## 12         12         LAYING                                      0.2601
## 13         13         LAYING                                      0.2767
## 14         14         LAYING                                      0.2333
## 15         15         LAYING                                      0.2895
## 16         16         LAYING                                      0.2742
## 17         17         LAYING                                      0.2698
## 18         18         LAYING                                      0.2747
## 19         19         LAYING                                      0.2727
## 20         20         LAYING                                      0.2395
## 21         21         LAYING                                      0.2713
## 22         22         LAYING                                      0.2800
## 23         23         LAYING                                      0.2740
## 24         24         LAYING                                      0.2729
## 25         25         LAYING                                      0.2508
## 26         26         LAYING                                      0.2716
## 27         27         LAYING                                      0.2741
## 28         28         LAYING                                      0.2759
## 29         29         LAYING                                      0.2873
## 30         30         LAYING                                      0.2810
## 31          1        SITTING                                      0.2612
## 32          2        SITTING                                      0.2771
## 33          3        SITTING                                      0.2572
## 34          4        SITTING                                      0.2715
## 35          5        SITTING                                      0.2737
## 36          6        SITTING                                      0.2768
## 37          7        SITTING                                      0.2847
## 38          8        SITTING                                      0.2675
## 39          9        SITTING                                      0.2483
## 40         10        SITTING                                      0.2706
## 41         11        SITTING                                      0.2766
## 42         12        SITTING                                      0.2750
## 43         13        SITTING                                      0.2743
## 44         14        SITTING                                      0.2800
## 45         15        SITTING                                      0.2729
## 46         16        SITTING                                      0.2808
## 47         17        SITTING                                      0.2774
## 48         18        SITTING                                      0.2773
## 49         19        SITTING                                      0.2738
## 50         20        SITTING                                      0.2780
## 51         21        SITTING                                      0.2775
## 52         22        SITTING                                      0.2736
## 53         23        SITTING                                      0.2734
## 54         24        SITTING                                      0.2735
## 55         25        SITTING                                      0.2785
## 56         26        SITTING                                      0.2582
## 57         27        SITTING                                      0.2739
## 58         28        SITTING                                      0.2770
## 59         29        SITTING                                      0.2772
## 60         30        SITTING                                      0.2683
</code></pre>

<p>Ah, I&#39;d like the ordering to be subject first, activity second. Let&#39;s do this:</p>

<pre><code class="r">samsAggregateFinal &lt;- samsAggregate[order(samsAggregate$subject_id, samsAggregate$activity_label), 
    ]
rownames(samsAggregateFinal) &lt;- NULL
head(samsAggregateFinal[, 1:3], n = 18)
</code></pre>

<pre><code>##    subject_id     activity_label
## 1           1             LAYING
## 2           1            SITTING
## 3           1           STANDING
## 4           1            WALKING
## 5           1 WALKING_DOWNSTAIRS
## 6           1   WALKING_UPSTAIRS
## 7           2             LAYING
## 8           2            SITTING
## 9           2           STANDING
## 10          2            WALKING
## 11          2 WALKING_DOWNSTAIRS
## 12          2   WALKING_UPSTAIRS
## 13          3             LAYING
## 14          3            SITTING
## 15          3           STANDING
## 16          3            WALKING
## 17          3 WALKING_DOWNSTAIRS
## 18          3   WALKING_UPSTAIRS
##    Time Domain Body Linear Acceleration Mean X
## 1                                       0.2216
## 2                                       0.2612
## 3                                       0.2789
## 4                                       0.2773
## 5                                       0.2892
## 6                                       0.2555
## 7                                       0.2814
## 8                                       0.2771
## 9                                       0.2779
## 10                                      0.2764
## 11                                      0.2776
## 12                                      0.2472
## 13                                      0.2755
## 14                                      0.2572
## 15                                      0.2800
## 16                                      0.2756
## 17                                      0.2924
## 18                                      0.2608
</code></pre>

<p>All good. Interestingly enough, the average body acceleration on X axis seem to stack up nicely based on related activities for subject 1, not as clearly for subjects 2 and 3&hellip; But this kind of analysis is out of scope for now and could be a good topic to further expand on. We can now write our tidy aggregates to text file and upload this dataset for peer assessment.</p>

<pre><code class="r">write.table(samsAggregateFinal, file = &quot;tidyAggregates.txt&quot;, sep = &quot; &quot;, col.names = TRUE, 
    row.names = FALSE)
</code></pre>

<p><strong>added on Tue 29th Apr</strong></p>

<p>I actually realized I didn&#39;t have single observational units in my data frame, so although it feels tidy it is not 100% tidy. Let&#39;s simply create one data frame for each activity.</p>

<pre><code class="r">tidy &lt;- split(samsAggregateFinal, samsAggregateFinal$activity_label)
for (df in tidy) {
    write.table(df, file = paste(&quot;tidy&quot;, df[1, 2], &quot;.txt&quot;, sep = &quot;_&quot;), sep = &quot; &quot;, 
        col.names = TRUE, row.names = FALSE)
}
</code></pre>

<p>You now have a tidy dataset, with 6 files (one per activity) holding 30 records each (one per subject).</p>

</body>

</html>

